openapi: 3.0.1
info:
  title: StayManager Public API
  description: Public API for accessing vacation rental property data.
  version: 'v1'
servers:
  - url: https://suite-manager.onrender.com
paths:
  /api/public/propiedades:
    get:
      operationId: getProperties
      summary: Get a list of properties
      parameters:
        - name: capacidad
          in: query
          description: Minimum capacity required (gte)
          schema:
            type: integer
        - name: ubicacion
          in: query
          description: Partial match for location or name
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  meta:
                    type: object
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        nombre:
                          type: string
                        precioBase:
                          type: number
                        capacidad:
                          type: number
  /api/public/propiedad/{id}:
    get:
      operationId: getPropertyDetail
      summary: Get property details
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  meta:
                    type: object
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      nombre:
                        type: string
                      ai_context:
                        type: object
                      images:
                        type: array
                        items:
                          type: object
                          properties:
                            url:
                              type: string
                            description:
                              type: string
                            tags:
                              type: array
                              items:
                                type: string
                            category:
                              type: string
  /api/public/propiedad/{id}/calendar:
    get:
      operationId: getPropertyCalendar
      summary: Get property availability
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  meta:
                    type: object
                  data:
                    type: object
                    properties:
                      busyRanges:
                        type: array
                        items:
                          type: object
                          properties:
                            start:
                              type: string
                            end:
                              type: string
  /api/public/reservar/intent:
    post:
      operationId: createBookingIntent
      summary: Create a booking intent and generate payment link
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - propiedadId
                - fechaLlegada
                - fechaSalida
                - personas
                - huesped
              properties:
                propiedadId:
                  type: string
                fechaLlegada:
                  type: string
                  format: date
                fechaSalida:
                  type: string
                  format: date
                personas:
                  type: integer
                huesped:
                  type: object
                  required:
                    - nombre
                    - email
                  properties:
                    nombre:
                      type: string
                    email:
                      type: string
                    telefono:
                      type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  meta:
                    type: object
                  data:
                    type: object
                    properties:
                      reserva_id:
                        type: string
                      estado:
                        type: string
                      desglose_financiero:
                        type: object
                        properties:
                          moneda:
                            type: string
                          total_estadia:
                            type: number
                          monto_a_pagar_ahora:
                            type: number
                          saldo_al_checkin:
                            type: number
                          porcentaje_se√±a:
                            type: string
                      link_pago:
                        type: string
                      instrucciones:
                        type: string
